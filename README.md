# Справочник автомобилей

Сервис справочника данных автомобиля с хранением данных в базе PostgreSQL.
Для каждого автомобиля набор данных включает:
- Номер;
- Марка;
- Цвет;
- Год выпуска;

### Описание  API

API позволяет:

1. Получить стартовую html-страницу, отправив `GET` запрос 
на  http://localhost:8001.

2. Получить список всех автомобилей в базе данных, отправив `GET` 
запрос без параметров на 
http://localhost:8001/list
Сервер вернет JSON со списком всех автомобилей в базе. 
    ```json
    [
      {
        "id": 4,
        "number": "AA999A96",
        "brand": "toyota",
        "color": "black",
        "year_of_issue": 1200
      },
      {
        "id": 5,
        "number": "DD999D96",
        "brand": "lada",
        "color": "red",
        "year_of_issue": 2000
      }
    ]
    ```
3. Получить список всех автомобилей в базе данных с сортировкой по 
параметрам, отправив `GET` запрос формата
http://localhost:8001/list с обязательными параметрами: 
    - sort_parameter - выбранный параметр для сортировки 
     может принимать значение:
      - number - сортировка по номеру автомобиля;
      - id - сортировка по ID автомобиля в базе данных;
      - color - сортировка по цвету;
      - year_of_issue - сортировка по году выпуска;
    - limit - количество выводимых элементов;
    - offset - смещение от начала списка;
    
     Сервер вернет JSON со списком всех автомобилей в базе. 
 
 4. Добавить автомобиль в базу данных, отправив `POST` запрос на http://localhost:8001/add
  с данными автомобиля в формате JSON (данные необходимо вводить латинскими буквами и цифрами):
    ```json
      {
        "number": "FF999F96",
        "brand": "tesla",
        "color": "red",
        "year_of_issue": 2020
       }
    ``` 
    В ответ сервер пришлет результат операции добавления: 
    - успех,   
    - ошибка,
    - объект уже существует.
5. Удалить автомобиль из базы, отправив `GET` запрос на http://localhost:8001/delete 
с параметром:
    - id - идентификатор автомобиля в базе данных.
    
    В ответ сервер пришлет ответ с результатом выполнения операции удаления:
    - успех,   
    - ошибка,
    - объект не найден.
6. Получить статистику по базе данных, отправив `GET` запрос на  http://localhost:8001/stat без параметров.
    В ответ сервер пришлет JSON с параметрами базы:
    ```json
        {
          "number_of_records": 3,
          "date_first_entry_was_added": "2020-10-01 12:49:12.728343",
          "date_last_entry_was_added": "2020-10-01 12:54:50.779439"
        }
    ```
    где 
    - number_of_records - количество записей в таблицу базы данных;
    - date_first_entry_was_added - дата и время добавления первой записи;
    - date_last_entry_was_added - дата и время добавления последней записи.


### Установка сервиса

Для установки и работы сервиса необходимо:
 - база данных PostgreSQL;
   - пользователь в базе с именем user1;
   - от имения пользователя user1 созданная база данных с именем cars.
 - Версия JRE 11.0.8
 
### Описание архитектуры приложения

HTTP-cервер CarsHttpServer принимает запросы по REST API и передает их в репозиторий Repository.
Репозиторий прокидывает запрос в CarDBDataSource. 
Репозиторий позволяет использовать множество источников данных, 
но на текущий момент реализован один - база данных.
CarDBDataSource реализует подключение к базе данных PostgreSQL.
Сущности CarDAO и StatisticDAO реализуют взаимодействие с базой данных через интерфейс JDBC.
 
 

